# **📝 \[小窝\] 产品需求文档 (PRD)**

| 属性 | 内容 |
| :---- | :---- |
| **项目名称** | **小窝 (Little Nest)** |
| **Slogan** | **再远，也要窝在一起** |
| **版本号** | V1.0.0 (MVP) |
| **状态** | 已定稿 (Final) |
| **最后更新** | 2025-12-26 |

## **1\. 项目背景与目标 (Background & Objectives)**

### **1.1 产品背景 (Context)**

随着现代生活节奏加快，异地恋情侣（LDR）及分隔两地的亲友数量庞大。对于他们而言，单纯的文字、语音或视频通话已经无法满足深度的情感交流需求。他们渴望“共同经历”某种场景，而“一起看电影/追剧”是最具普适性的陪伴方式。

**“小窝”** 致力于为这些用户搭建一个跨平台的在线私密放映室（支持 1-7 人），通过技术手段抹平物理距离，营造“同处一室视听”的温馨体验。

### **1.2 现有解决方案调研 (Market Landscape)**

在决定开发之前，我们深入调研了目前用户常用的 4 类替代方案，发现它们均无法完美覆盖用户的核心诉求：

| 方案类型 | 代表产品 | 核心痛点 (Deal Breaker) | 为什么用户不满意？ |
| :---- | :---- | :---- | :---- |
| **商业 App 类** | **Together** | **收费 & 下载门槛** | 好用的功能（如高画质）通常需要付费订阅；且需所有人都下载 App，占用手机空间，初次引导成本较高。 |
| **情侣/社交 App** | **同娱、微光、Bind** | **内容受限 & 场景单一** | 内容受限于版权库；通常仅针对“1v1 情侣”设计，难以支持多位朋友同时观影；功能臃肿，不清净。 |
| **会议/投屏类** | 腾讯会议、Zoom | **画质差 & 有回声** | 会议软件的高压缩率导致看电影像看 PPT；音频回环严重，经常需要其他人静音，无法正常交流。 |
| **开源/极客类** | **SyncTV**、Syncplay | **太难部署** | 需要自己有服务器或者 NAS；配置 IP 端口的过程对普通用户来说简直是天书。 |

### **1.3 核心痛点挖掘 (Deep Dive)**

基于对竞品的分析和真实场景洞察，我们从**钱、质量、操作、感觉**四个维度，还原用户面临的 **7 大核心困扰**：

#### **一、关于钱和资源（能不能看？）**

1. **💸 多份会员，多重花销 (Multiple Cost)**  
   * 各大视频平台严查账号共享，且限制异地登录。  
   * 为了同时看一部热播剧，大家往往需要**各自购买**昂贵的 SVIP 会员，或者付费使用按时长计费的第三方工具。  
2. **🚧 版权割裂，来回切 App (Content Silos)**  
   * 想看《哈利波特》得去平台 A，想看《甄嬛传》得去平台 B。  
   * 为了追不同的剧，大家得在好几个 App 之间跳来跳去，体验极度割裂。

#### **二、关于观影质量（看得爽吗？）**

3. **⏱️ 手动倒数太傻，一卡顿就乱套 (Sync Latency)**  
   * 没有工具时，只能语音喊“3-2-1 播放”。但这根本没用，只要一人网络稍微卡一下，进度就对不上了。  
   * **后果：** 有人已经笑完了，其他人还没看到笑点，严重破坏共情体验。  
4. **📉 屏幕共享画质渣，全是马赛克 (Quality Drop)**  
   * 被迫使用会议软件共享屏幕。  
   * 传输电影画面会被压缩得模糊不清，而且经常有回声。

#### **三、关于操作门槛（用得来吗？）**

5. **🤯 极客工具太难用，装都装不上 (Setup Friction)**  
   * 市面上一些开源工具配置太复杂。  
   * 通常是发起人兴致勃勃，其他人怎么都搞不定，耗尽了耐心。  
6. **🪑 不想正襟危坐，只想躺着看 (Device Constraints)**  
   * 很多插件只能在电脑浏览器上用。  
   * 但累了一天，大家只想瘫在床上用 iPad 或手机看。

#### **四、关于陪伴感（有感觉吗？）**

7. **📱 各看各的，不仅没交流还分心 (Interaction Disconnect)**  
   * 现在的常态是：大屏幕放着电影，大家各自低头回手机微信。  
   * 缺乏同频共振的亲密感。

### **1.4 产品目标 (Goals)**

我们计划开发一个 Web 端 MVP，通过“做减法”来极致满足核心需求：

* **核心价值：全网直链播放 (Direct Link Only)**  
  * 砍掉复杂的本地文件传输功能，MVP 版本专注于**URL 直链解析**。降低带宽成本，保证画质原生无损。  
* **适配指标：多端无缝同看 (Multi-Device Support)**  
  * 采用响应式网页设计 (Responsive Web Design)，确保**手机、平板、电脑**浏览器均能完美运行。  
* **技术指标：分级智能同步 (Adaptive Sync)**  
  * 摒弃简单的二元同步。建立\*\*“服务器授时 \+ 四级追帧”\*\*机制，通过微调倍速无感追平，拒绝频繁卡顿。  
* **韧性指标：中断保护与重连 (Resilience)**  
  * **设备保护：** 当任意成员切后台/回消息/来电话时，系统自动全员暂停，绝不错过一秒剧情。  
  * **网络保护：** 弱网环境触发缓冲保护；断网后支持静默重连并自动归队。  
* **体验指标：微信的最佳伴侣 (WeChat Companion)**  
  * **不做社交功能**（无内置 IM、无语音/视频）。鼓励用户保持**微信视频通话常连**。  
* **准入指标：零门槛入窝 (Zero Threshold)**  
  * 无需注册、无需下载客户端，通过“一把钥匙”（URL 链接）即可直达房间。

### **1.5 成功衡量指标 (Success Metrics)**

*上线后，如何判断 MVP 是否达标？*

### **北极星指标 (North Star Metric)**

**🎯 每周成功同步观影总时长 (Weekly Successful Sync Movie Time)**

- **定义**：所有用户每周成功完成同步观影的累计时长
- **为什么是它**：直接反映产品核心价值——让分隔两地的用户获得高质量的陪伴观影体验
- **目标**：MVP阶段 > 500小时/周
- **计算**：∑(每房间同步观影时长) / 7天
- **成功标准**：达到目标说明用户真的在使用产品解决情感陪伴需求

### **用户行为验证指标 (User Behavior Metrics)**

**核心验证问题**：用户是否真的认为这个产品解决了他们的问题？

**指标设计**：
1. **首次成功率 (First-time Success Rate)**
   - 定义：第一次使用产品的用户，能在30分钟内完成完整观影流程的比例
   - 目标：>80%
   - 计算：完成完整流程用户数 / 首次访问用户数

2. **主动分享率 (Voluntary Share Rate)**  
   - 定义：用户主动复制邀请链接给朋友的比例
   - 目标：>30%
   - 计算：点击复制链接次数 / 房间创建次数

3. **重复使用率 (Return Usage Rate)**
   - 定义：首次成功后，7天内再次创建房间的比例  
   - 目标：>40%
   - 计算：7天内回访并创建新房间的用户数 / 首次成功用户数

4. **推荐意愿 (Net Promoter Score - NPS)**
   - 定义："你有多大可能向朋友推荐小窝？"(0-10分)
   - 目标：NPS > 30
   - 计算：(推荐者比例 - 贬损者比例) × 100

**技术指标（保留但补充）**：
- 同步精准度：95%时间偏差<500ms ✅ (保留)
- 连接稳定性：单次观影>45分钟 ✅ (保留)  
- 零门槛验证：新访客<15秒开始播放 ✅ (保留)

**新增 - 体验指标**：
- 视频源可用率：测试链接成功播放比例 >90%
- 错误恢复成功率：操作失败后用户自主解决问题的比例 >60%

### **1.6 风险与挑战 (Risks & Mitigation)**

1. **直链获取门槛：** 用户分不清网页链接和视频直链。**对策：** 前端增加格式强校验，提供简单教程或测试源。  
2. **浏览器自动播放策略：** 访客进房后无声。**对策：** 设计“点击加入”的全屏遮罩引导，强制交互获取权限。  
3. **跨域/防盗链限制：** 部分视频源无法播放。**对策：** 明确报错提示，或者尝试后端代理（MVP+）。

## **2\. 核心功能范围 (Feature Scope)**

### **2.1 功能优先级矩阵 (Feature Matrix)**

| 模块 | 功能点 | 优先级 | 简述 (User Story) |
| :---- | :---- | :---- | :---- |
| **房间系统** | **快速创建/销毁** | **P0** | 用户点击“创建小窝”，系统生成唯一 **6位（数字+字母）** 房间号；**房间人数上限 7 人**；无人在线 10 分钟后自动销毁。 |
| **房间系统** | **URL 邀请** | **P0** | 生成专属链接（如 xiaowo.app/r/8XA92B），好友点击链接直接进房，无注册流程。 |
| **房间系统** | **加入房间 (Join)** | **P0** | 支持 URL 直达和手动输入 RoomID 加入。包含房间有效性及满员校验（\>7人提示已满）。 |
| **房间系统** | **在线成员列表** | **P0** | **体验升级：** 显示所有成员的随机萌趣头像列表。**功能点：** 1\. **身份标识：** 图标区分房主（👑）和自己（Me）。 2\. **网络信号灯：** 实时显示每人的连接状态（绿/黄/红/黑灯）。 |
| **播放核心** | **直链解析 (集成)** | **P0** | 支持输入 .mp4、.m3u8 等标准流媒体链接并解析播放。 **内置异常处理：** 自动检测格式、CORS 跨域限制或 404 错误。若解析失败，直接在播放器区域显示明确报错提示。 |
| **播放核心** | **基础控制** | **P0** | **全员可控模式。** 房间内任一成员均拥有对等的控制权（播放/暂停/进度/倍速），操作实时同步给所有人。 |
| **播放核心** | **状态恢复 (缓存)** | **P0** | **逻辑优化：** 优先同步房间内他人的进度。**仅当房间无人或自己是房主时**，才从 LocalStorage 恢复视频链接和进度。同时**记忆用户偏好**（音量/静音/昵称）。 |
| **同步引擎** | **状态广播** | **P0** | 任何一方的暂停/播放/快进/倍速操作，必须通过 WebSocket 实时广播给对方。 |
| **同步引擎** | **智能追帧 (Smart Sync)** | **P0** | **核心差异点：** 采用四级分层策略（完美/温柔/幽灵/强制），根据误差大小动态选择 变速或跳转，拒绝卡顿。 |
| **同步引擎** | **缓冲保护 (Buffering)** | **P0** | 当一方因网络卡顿进入 Loading 状态时，自动暂停另一方并提示，防止进度滑脱。 |
| **UI/UE** | **多端适配 (Responsive)** | **P0** | **关键痛点：** 一套代码适配 PC 宽屏、平板、手机竖屏。手机端需优化触摸体验。 |
| **播放核心** | **资源热度 (后台)** | **P1** | **后台静默记录 (无UI)。** 用户无需操作，系统在视频解析成功且播放超过一定时长（如1分钟）后，自动将链接存入数据库。**前端不显示历史记录**，仅用于后台沉淀热门资源。 |
| **用户体系** | **临时身份** | **P1** | 进房默认分配趣味昵称（如：潜水的章鱼），用户不可修改，存储在本地 Cookie 中。 |
| **辅助功能** | **预设演示片源** | **P1** | **新增：** 在输入框下方提供 5 个内置的无版权测试链接（如 Big Buck Bunny、大闹天宫等），点击即可一键填入并加载，方便用户快速体验同步效果。 |
| **辅助功能** | **格式校验** | **P1** | 粘贴链接后自动检测是否为有效视频格式，无效则报错提示，减少用户困惑。 |
| **辅助功能** | **新手引导** | **P2** | 首次进房展示简单的遮罩引导（“点这里邀请TA”，“粘贴链接在这里”）。 |
| **Out (不做)** | **应用内聊天** | **Out** | **战略放弃：** 界面不提供聊天框，留白给视频画面，引导用户挂后台微信语音。 |
| **Out (不做)** | **本地上传** | **Out** | 不支持从本地硬盘上传文件（技术复杂且带宽成本高）。 |
| **Out (不做)** | **外挂字幕** | **Out** | 暂时不做，鼓励用户寻找自带硬字幕的资源。 |
| **Out (不做)** | **账户系统** | **Out** | 不做手机号/微信登录，纯粹的“阅后即焚”式工具。 |
| **Out (不做)** | **门锁/踢人** | **Out** | **战略放弃：** 保持连接的开放性和极简体验，依靠房间号随机性保障基础隐私。 |

### **2.2 核心业务流程 (Core User Flows)**

#### **流程 1：房主建房 \- 邀请 \- 选片 \- 开播 (Host Lifecycle)**

1. **一键建房与回房 (Create / Return)：**  
   * **场景：** 用户打开首页。  
   * **系统判断：** 检查 LocalStorage 中是否有 RoomID，且最后访问时间在 **15分钟内**。  
   * **分支 A (无记录/已过期)：** 仅显示 **\[创建小窝\]** 大按钮。  
   * **分支 B (有记录/未过期)：** 显示 **\[创建小窝\]** 主按钮，并在其显著位置显示动态提示 **\[回到房间 8XA92B\]**。  
   * **动作与兜底：** 点击“创建”生成新房间；点击“回到”跳转旧房间（若已销毁则引导重建）。  
2. **邀请入伙 (Invite)：**  
   * **动作：** 房主点击界面上显眼的 **\[复制邀请链接\]** 按钮，并通过微信/QQ 发送给好友。  
   * **状态：** 此时房间内仅房主一人。  
   * **反馈：** 成员列表显示房主头像（👑），并显示“等待加入...”占位符。  
3. **加载视频 (Load Video)：**  
   * **动作 (方式 A)：** 在输入框粘贴视频直链（.mp4/.m3u8）。  
   * **动作 (方式 B)：** **点击输入框下方的 \[快速演示\] 标签，选择一个内置测试片源（如《大闹天宫》）。**  
   * **动作：** 点击 **\[加载\]**（注：不自动播放）。  
   * **系统：** 解析链接 \-\> 校验格式/CORS \-\> 缓冲首帧画面。  
   * **反馈：** 成功则显示视频首帧并暂停；失败则显示错误提示。  
4. **开始播放 (Start Playback)：**  
   * **前置条件：** 成员列表中好友头像亮起，且信号灯为 **🟢 (绿灯)**，表示已就绪。  
   * **用户动作：** 房主（或任一成员）点击播放器 **\[▶ 播放\]** 按钮。  
   * **反馈：** 所有客户端同步开始播放视频。  
5. **播放记录上报 (History Reporting)：**  
   * **系统：** 视频成功播放超过 **60秒** 后，后端自动将该 URL 记录至资源库，用于统计热门资源。

#### **流程 2：访客加入 \- 校验 \- 同步 \- 激活 (Guest Lifecycle)**

1. **加入房间 (Join Room)：**  
   * **用户动作 (方式 A)：** 点击邀请链接（推荐）。  
   * **用户动作 (方式 B)：** 在首页手动输入 6 位房间号。  
   * **系统校验：** 检查房间号有效性及人数上限（\>7人拒绝加入）。  
   * **反馈：** 校验通过后自动分配临时昵称，进入房间。  
2. **同步房间状态 (Sync Room State)：**  
   * **系统处理：** 客户端连接服务器，请求当前房间的播放状态。**服务器基于维护的“云端时钟”直接返回结果**（不依赖房主客户端响应）。  
   * **获取数据：** 视频链接、服务器计算的当前进度（Current Time）、播放状态（Playing/Paused）。  
3. **预加载与对齐 (Pre-load & Alignment)：**  
   * **系统处理：** 播放器静音加载视频。缓冲就绪 (onCanPlay) 后，直接跳转 (Seek) 至服务器返回的目标时间点。  
   * **状态：** 画面已与房间同步，处于静音/暂停状态，等待用户激活。  
4. **解除限制与播放 (Unmute & Play)：**  
   * **场景说明：** 应对浏览器的自动播放策略限制（Autoplay Policy）。  
   * **界面展示：** 显示全屏遮罩，提示 **\[点击加入观影\]**。  
   * **用户动作：** 点击屏幕任意位置。  
   * **最终效果：** 视频解除静音并应用房间状态（同步播放或暂停）。信号灯变 **🟢 (绿灯)**。

#### **流程 3：异常情况处理 (Exception Handling)**

1. **网络卡顿或掉线 (Network Instability)：**  
   * **场景：** 视频缓冲（Buffering）或网络断开。  
   * **处理：** 卡顿则触发缓冲保护，全员自动暂停；掉线则判定用户离线，全员暂停并提示。  
   * **恢复：** 网络恢复后自动重连，同步最新进度并继续播放。  
2. **页面刷新/重连 (Page Reload)：**  
   * **场景：** 用户刷新页面或重新打开浏览器。  
   * **处理：** 读取 LocalStorage 中的房间信息自动重连。  
   * **结果：** 恢复至刚才的房间和进度；保持用户设定的音量和昵称。  
3. **播放错误 (Playback Error)：**  
   * **场景：** 视频源失效、格式不支持或跨域限制。  
   * **处理：** 捕获播放器错误事件。  
   * **结果：** 显示明确的错误提示，并提供 **\[重试\]** 按钮引导用户原地重试或更换链接。  
4. **设备中断或挂起 (Device Interruption)：**  
   * **场景：** 移动端切后台、锁屏、来电、闹钟。  
   * **处理：** 监测到页面不可见 (visibilitychange) 或系统级暂停，触发全员暂停。  
   * **结果：** 房间暂停，提示“User A 暂时离开（切后台/来电），等待回来...”。用户切回前台后，点击播放继续。  
5. **多标签页冲突 (Multi-tab Conflict)：**  
   * **场景：** 同一浏览器打开多个房间页面。  
   * **处理：** 检测到重复连接，强制断开旧连接。  
   * **结果：** 旧页面提示“已在别处打开”，保留新页面连接。  
6. **房间已过期 (Room Expired)：**  
   * **场景：** 房间闲置超过 10 分钟自动销毁后，用户再次访问。  
   * **处理：** 识别 RoomID 无效。  
   * **结果：** 显示引导页“房间已过期，是否创建新房间？”，支持一键重建。

### **2.3 关键功能详细说明 (Detailed Specs)**

#### **2.3.1 智能同步策略 (Smart Sync Strategy)**

**规则定义（四级分层策略）：**

| 状态 | 误差范围 (Δt) | 系统执行动作 | 用户感知体验 |
| :---- | :---- | :---- | :---- |
| **🟢 完美同步** | **\< 0.05s** | **无动作 (No-op)** | ✅ 画面完全一致 |
| **🟡 温柔微调** | **0.05s \- 3s** | **动态变速 (Adaptive Speed)** | 🎢 **无感追平：** 落后者 1.05x，超前者 0.95x |
| **🔴 快速追赶** | **3s \- 10s** | **幽灵模式 (Ghost Fast-forward)** | ⏩ **明显加速：** 启用 1.5x \- 2.0x 倍速快速追赶 |
| **⚫ 强制对齐** | **\> 10s** | **强制跳转 (Hard Seek)** | 🔄 **画面跳变：** 伴随 Loading，直接跳至最新位置 |

**补充规则 1：长时自动校准 (Periodic Check)**

* 为了防止长电影在无操作情况下产生累积误差，系统每隔 **30秒** 会自动进行一次静默对表。若发现偏差超过阈值，自动触发“温柔微调”。

**补充规则 2：倍速叠加逻辑 (Rate Superposition)**

* **基准倍速 (Base Rate)：** 用户手动设置的倍速（如 1.5x, 2.0x）为全局基准，**全员同步**。  
* **最终倍速 (Final Rate)：** 系统的追帧微调是在基准倍速上进行**乘法叠加**。  
  * *公式：* 最终播放速度 \= 用户基准倍速 × 追帧系数

#### **2.3.2 移动端适配要求 (Mobile Adaptation)**

**规则定义：**

* **布局逻辑：**  
  * **竖屏模式 (Portrait)：** 采用 **“上视下控”** 结构。  
    * **上部 (View Zone)：** 视频播放器固定在顶部（保持 16:9 比例）。  
    * **中部 (Info Zone)：** 房间信息、成员头像、信号灯。  
    * **下部 (Control Zone)：** 放置大尺寸的链接输入框、加载按钮、预设片源。**重点：** 输入框需位于屏幕下半部分，防止键盘弹起时遮挡视频。  
  * **横屏模式 (Landscape)：** 自动进入全屏沉浸模式，隐藏所有非必要 UI（输入框、成员列表），仅保留播放控制栏。  
* **交互优化：** 手机端需提供大尺寸的触控区域（如屏幕中央点击暂停/播放），以替代 PC 端的空格键快捷操作。

#### **2.3.3 全员控制冲突处理 (Conflict Handling Rules)**

**规则定义：**

1. **防止指令回声 (Anti-Echo)：** 收到同步指令执行动作后，**严禁**再次向外发送广播信号，阻断无限循环。  
2. **后发指令优先 (Latest Wins)：** 多人拖动进度条时，系统依据动作发生的**时间戳**裁决。以最后的操作为准。  
3. **拖拽时的互不干扰 (Drag Isolation)：** 在**松手确认之前**，不广播中间过程。其他端保持原状，直到松手后一次性跳转。  
4. **防止重复操作冲突 (Status Stability)：** 指令必须是**绝对状态**（如“设为播放”），而非**相对动作**（如“切换状态”）。

#### **2.3.4 进房同步体验保障 (Join Experience Assurance)**

**规则定义：**

1. **精准对齐 (Accuracy)：** 访客获取进度时，系统需自动计算并抵消网络传输时延。  
2. **拒绝等待房主 (No Blocking)：** 访客进房获取进度时，**严禁**依赖房主客户端的响应。必须由服务器维护独立的“云端时钟”并直接返回。  
3. **状态最终一致 (Final Consistency)：** 若在访客加载视频期间房间状态发生变化，访客视频加载完毕后，必须**自动应用最新的房间状态**。

#### **2.3.5 缓冲保护与追帧的协作逻辑 (Cooperation)**

**规则定义：**

1. **房主/多数人卡顿 (Global Pause)：** 若**房主**进入缓冲状态超过 2秒，系统触发全员暂停保护，等待房主恢复。  
2. **个别访客卡顿 (Local Pause)：** 若**非房主**的普通成员卡顿，**不暂停全员**。该成员本地暂停缓冲，缓冲完毕后触发“幽灵模式”快速追赶进度。  
3. **追帧介入 (Optimization)：** 恢复播放瞬间，若各端存在微小误差，**智能追帧立刻接管**，通过微调倍速无感抹平误差。

#### **2.3.6 必须明确的操作界限 (Operational Rules)**

1. **全局共享 (Global)：** 播放、暂停、拖动进度条、**倍速设置**。  
2. **本地独享 (Local)：** **音量大小、静音、全屏模式**、字幕开关。严禁同步。  
3. **提示防遮挡 (UI Safety)：** 所有的系统提示（如“谁暂停了”），**严禁出现在屏幕底部 20% 的区域**，必须避开字幕区。

#### **2.3.7 资源兼容性与播放稳定性 (Resource & Stability Rules)**

1. **HTTP/HTTPS 无感兼容：** 系统需通过后台代理或其他手段，自动使不安全的 http:// 链接能在 HTTPS 网站中播放。  
2. **防盗链适配：** 系统应尽最大努力兼容常见防盗链（Referer）限制，或给出通俗的“无法播放”提示。

## **3\. 界面交互与布局逻辑 (UI/UX Logic)**

### **3.1 视觉参考模版 (Visual Reference)**

**设计风格关键词：** 暖色调 (Warm Cream \+ Soft Coral)、圆角卡片、柔和阴影、暗黑沉浸模式。

**核心布局逻辑提炼：**

1. **首页：** 包含“创建”、“回房”（动态）、“输入房间号”（兜底）三层入口。  
2. **移动端：** 竖屏强制采用“上视频、下操作”结构，输入框沉底防遮挡。  
3. **PC端：** 沉浸式全屏，房主控制台以“底部抽屉”形式折叠。  
4. **交互：** 必现“破冰遮罩”解决自动播放限制；预埋“异常重试”图层。

### **3.2 关键页面布局要求 (Layout Requirements)**

#### **3.2.1 首页 (Landing Page)**

* **核心任务：** 引导用户快速“创建”或“加入”。  
* **布局优先级：**  
  1. **一级权重：** **\[创建小窝\]** 按钮。需位于视觉中心，最易点击，配合品牌 Slogan 展示。  
  2. **二级权重：** **\[回到房间\]** 入口（动态显示）。当检测到本地有未过期房间记录时，需在主按钮附近提供显眼的快捷入口。  
  3. **三级权重：** **\[输入房间号\]** 入口。作为兜底方案（跨设备/链接失效），不应喧宾夺主，可设计为次级按钮或输入框。

#### **3.2.2 播放页 \- PC/桌面端 (Desktop Room)**

* **布局策略：**  
  * **全屏铺满：** 视频播放器占据屏幕主体。  
  * **悬浮层级：** 顶部栏（房间号、信号灯、成员）自动隐现；控制面板（换片、预设源）采用底部抽屉形式。

#### **3.2.3 播放页 \- 移动端 (Mobile Room)**

* **竖屏布局 (Portrait) \- “上视下控”结构：**  
  * **上部 (View Zone)：** 视频播放器固定在顶部（16:9）。  
  * **中部 (Info Zone)：** 房间信息、成员头像、信号灯。  
  * **下部 (Control Zone)：** 放置大尺寸的链接输入框、加载按钮、预设片源。**重点：** 输入框需位于屏幕下半部分，防止键盘弹起时遮挡视频或输入框本身。  
* **横屏布局 (Landscape) \- “纯净模式”：**  
  * 强制全屏显示视频，隐藏所有非必要 UI（输入框、成员列表）。

### **3.3 核心交互状态 (Key Interaction States)**

1. **加入观影确认遮罩 (Join Confirmation Overlay)：** 访客进房视频加载完毕后，覆盖全屏半透明遮罩，提示“点击加入观影”，解决浏览器自动播放限制。  
2. **全局消息反馈 (System Toast)：** 严禁遮挡视频底部的字幕区域。  
3. **网络健康度反馈 (Signal Light)：** 鼠标悬停（PC）或点击（Mobile）信号灯时，显示具体的延迟数值。  
4. **异常流程缺省页 (Empty/Error States)：** 解析失败显示重试按钮；房间过期显示重建引导。

### **3.4 视觉体验建议 (Visual Experience Guidelines)**

* **模式适配：** 首页推荐温馨浅色模式；播放页**强制使用深色/暗黑模式**。  
* **动效微交互：** 页面切换使用淡入淡出 (Fade)；信号灯增加呼吸动效。

## **4\. 非功能需求与技术约束 (NFR)**

### **4.1 性能指标要求 (Performance Requirements)**

1. **响应速度：** 进房速度 \< 1秒；操作延迟 \< 100ms（视觉反馈）。  
2. **同步性能：** 端到端指令传输延迟 \< 200ms；智能追帧精度 \< 500ms。  
3. **并发能力：** 单房间支持至少 20 连接（冗余）；系统支持 100 房间并发。

### **4.2 安全性要求 (Security Requirements)**

1. **房间安全：** 房间号防爆破（频次限制）；无人在线 10分钟后物理销毁数据。  
2. **内容安全：** 输入内容 XSS 过滤；黑名单域名拦截。  
3. **隐私保护：** 不持久化存储用户敏感信息，日志脱敏。

### **4.3 兼容性要求 (Compatibility)**

1. **浏览器：** 兼容 Chrome, Safari, Firefox, Edge 及微信内置浏览器。  
2. **视频格式：** 必须支持 MP4, M3U8 (HLS)。

### **4.4 数据统计与埋点 (Analytics & Tracking)**

1. **房间创建数 (Daily Rooms)**  
2. **有效观影时长 (Watch Time)** —— *北极星指标*  
3. **链接解析成功率**  
4. **异常中断率**  
5. **热门资源 Top 10**