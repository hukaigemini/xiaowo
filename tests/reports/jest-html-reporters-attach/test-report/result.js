window.jest_html_reporters_callback__({"numFailedTestSuites":1,"numFailedTests":11,"numPassedTestSuites":0,"numPassedTests":1,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":1,"numTotalTests":12,"startTime":1767109709528,"success":false,"testResults":[{"numFailingTests":11,"numPassingTests":1,"numPendingTests":0,"numTodoTests":0,"perfStats":{"end":1767109709849,"runtime":298,"slow":false,"start":1767109709551},"testFilePath":"/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js","failureMessage":"\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › API连接性测试 › TC_SMOKE_001: API服务可访问\u001b[39m\u001b[22m\n\n    TypeError: apiClient.healthCheck is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 25 |\u001b[39m     describe(\u001b[32m'API连接性测试'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 26 |\u001b[39m         test(\u001b[32m'TC_SMOKE_001: API服务可访问'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 27 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m apiClient\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                              \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 28 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'success'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 29 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m'✅ API服务连接正常'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 30 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.healthCheck (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:27:46)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › API连接性测试 › TC_SMOKE_002: API响应时间正常\u001b[39m\u001b[22m\n\n    TypeError: apiClient.healthCheck is not a function\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 32 |\u001b[39m         test(\u001b[32m'TC_SMOKE_002: API响应时间正常'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 33 |\u001b[39m             \u001b[36mconst\u001b[39m startTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 34 |\u001b[39m             \u001b[36mawait\u001b[39m apiClient\u001b[33m.\u001b[39mhealthCheck()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                             \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 35 |\u001b[39m             \u001b[36mconst\u001b[39m responseTime \u001b[33m=\u001b[39m \u001b[33mDate\u001b[39m\u001b[33m.\u001b[39mnow() \u001b[33m-\u001b[39m startTime\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 36 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 37 |\u001b[39m             expect(responseTime)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m5000\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 5秒内响应\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.healthCheck (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:34:29)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 房间管理核心功能 › TC_SMOKE_003: 能够创建公开房间\u001b[39m\u001b[22m\n\n    AggregateError: Error\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 82 |\u001b[39m   \u001b[36masync\u001b[39m createRoom(roomData\u001b[33m,\u001b[39m token \u001b[33m=\u001b[39m \u001b[36mnull\u001b[39m) {\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m     \u001b[36mconst\u001b[39m headers \u001b[33m=\u001b[39m token \u001b[33m?\u001b[39m { \u001b[33mAuthorization\u001b[39m\u001b[33m:\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m } \u001b[33m:\u001b[39m {}\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 84 |\u001b[39m     \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mclient\u001b[33m.\u001b[39mpost(\u001b[32m'/api/v1/rooms'\u001b[39m\u001b[33m,\u001b[39m roomData\u001b[33m,\u001b[39m { headers })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m     \u001b[36mreturn\u001b[39m response\u001b[33m.\u001b[39mdata\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat AxiosError.Object.<anonymous>.AxiosError.from (\u001b[22m\u001b[2mnode_modules/axios/lib/core/AxiosError.js\u001b[2m:96:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat RedirectableRequest.handleRequestError (\u001b[22m\u001b[2mnode_modules/axios/lib/adapters/http.js\u001b[2m:817:25)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ClientRequest.eventHandlers.<computed> (\u001b[22m\u001b[2mnode_modules/follow-redirects/index.js\u001b[2m:49:24)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Axios.request (\u001b[22m\u001b[2mnode_modules/axios/lib/core/Axios.js\u001b[2m:45:41)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ApiClient.createRoom (\u001b[22m\u001b[2mutils/apiClient.js\u001b[2m:84:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:50:30)\u001b[22m\u001b[2m\u001b[22m\n\n    Cause:\n    AggregateError:\n\u001b[2m\u001b[22m\n\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 房间管理核心功能 › TC_SMOKE_004: 能够获取房间信息\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 58 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 59 |\u001b[39m         test(\u001b[32m'TC_SMOKE_004: 能够获取房间信息'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 60 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m apiClient\u001b[33m.\u001b[39mgetRoom(testRoom\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                                               \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 61 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'success'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 62 |\u001b[39m             expect(response\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mid)\u001b[33m.\u001b[39mtoBe(testRoom\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 63 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m'✅ 房间信息获取正常'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:60:63)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 会话管理核心功能 › TC_SMOKE_005: 能够创建用户会话\u001b[39m\u001b[22m\n\n    AggregateError: Error\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 45 |\u001b[39m   \u001b[90m// 创建会话\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 46 |\u001b[39m   \u001b[36masync\u001b[39m createSession(userData) {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 47 |\u001b[39m     \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m \u001b[36mthis\u001b[39m\u001b[33m.\u001b[39mclient\u001b[33m.\u001b[39mpost(\u001b[32m'/api/v1/sessions'\u001b[39m\u001b[33m,\u001b[39m userData)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 48 |\u001b[39m     \u001b[36mreturn\u001b[39m response\u001b[33m.\u001b[39mdata\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 49 |\u001b[39m   }\u001b[22m\n\u001b[2m     \u001b[90m 50 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat AxiosError.Object.<anonymous>.AxiosError.from (\u001b[22m\u001b[2mnode_modules/axios/lib/core/AxiosError.js\u001b[2m:96:14)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat RedirectableRequest.handleRequestError (\u001b[22m\u001b[2mnode_modules/axios/lib/adapters/http.js\u001b[2m:817:25)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ClientRequest.eventHandlers.<computed> (\u001b[22m\u001b[2mnode_modules/follow-redirects/index.js\u001b[2m:49:24)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Axios.request (\u001b[22m\u001b[2mnode_modules/axios/lib/core/Axios.js\u001b[2m:45:41)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat ApiClient.createSession (\u001b[22m\u001b[2mutils/apiClient.js\u001b[2m:47:22)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:74:30)\u001b[22m\u001b[2m\u001b[22m\n\n    Cause:\n    AggregateError:\n\u001b[2m\u001b[22m\n\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 会话管理核心功能 › TC_SMOKE_006: 能够加入房间\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 82 |\u001b[39m         test(\u001b[32m'TC_SMOKE_006: 能够加入房间'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 83 |\u001b[39m             \u001b[36mconst\u001b[39m joinData \u001b[33m=\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 84 |\u001b[39m                 room_id\u001b[33m:\u001b[39m testRoom\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m    |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 85 |\u001b[39m                 display_name\u001b[33m:\u001b[39m \u001b[32m'冒烟测试用户'\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 86 |\u001b[39m             }\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 87 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:84:35)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › WebSocket连接核心功能 › TC_SMOKE_007: WebSocket能够连接\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 102 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 103 |\u001b[39m         test(\u001b[32m'TC_SMOKE_007: WebSocket能够连接'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 104 |\u001b[39m             \u001b[36mawait\u001b[39m expect(wsClient\u001b[33m.\u001b[39mconnect(testRoom\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m testSession\u001b[33m.\u001b[39mtoken))\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 105 |\u001b[39m                 \u001b[33m.\u001b[39mresolves\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 106 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 107 |\u001b[39m             expect(wsClient\u001b[33m.\u001b[39misConnected)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:104:52)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › WebSocket连接核心功能 › TC_SMOKE_008: 能够发送播放控制消息\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\n    Error name:    \u001b[31m\"Error\"\u001b[39m\n    Error message: \u001b[31m\"WebSocket未连接\"\u001b[39m\n\n        \u001b[0m \u001b[90m 103 |\u001b[39m   send(type\u001b[33m,\u001b[39m data \u001b[33m=\u001b[39m {}) {\n         \u001b[90m 104 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39misConnected) {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 105 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'WebSocket未连接'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 106 |\u001b[39m     }\n         \u001b[90m 107 |\u001b[39m     \n         \u001b[90m 108 |\u001b[39m     \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m,\u001b[39m data })\u001b[33m;\u001b[39m\u001b[0m\n\n          \u001b[2mat WebSocketClient.send (\u001b[22mutils/websocketClient.js\u001b[2m:105:13)\u001b[22m\n          \u001b[2mat WebSocketClient.send [as sendPlay] (\u001b[22mutils/websocketClient.js\u001b[2m:115:10)\u001b[22m\n          \u001b[2mat sendPlay (\u001b[22msmoke.test.js\u001b[2m:112:35)\u001b[22m\n          \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n          \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n          \u001b[2mat Object.toThrow (\u001b[22msmoke.test.js\u001b[2m:112:55)\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 110 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 111 |\u001b[39m         test(\u001b[32m'TC_SMOKE_008: 能够发送播放控制消息'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 112 |\u001b[39m             expect(() \u001b[33m=>\u001b[39m wsClient\u001b[33m.\u001b[39msendPlay(\u001b[35m0\u001b[39m\u001b[33m,\u001b[39m \u001b[35m0\u001b[39m))\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                       \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 113 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m'✅ 播放控制消息发送正常'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 114 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 115 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.toThrow (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:112:55)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 数据一致性验证 › TC_SMOKE_009: 房间成员数量正确\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 123 |\u001b[39m     describe(\u001b[32m'数据一致性验证'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m 124 |\u001b[39m         test(\u001b[32m'TC_SMOKE_009: 房间成员数量正确'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 125 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m apiClient\u001b[33m.\u001b[39mgetRoomMembers(testRoom\u001b[33m.\u001b[39mid)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 126 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'success'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 127 |\u001b[39m             expect(response\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mmembers)\u001b[33m.\u001b[39mtoContainEqual(\u001b[22m\n\u001b[2m     \u001b[90m 128 |\u001b[39m                 expect\u001b[33m.\u001b[39mobjectContaining({\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:125:70)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 数据一致性验证 › TC_SMOKE_010: 会话状态保持\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'token')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 134 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 135 |\u001b[39m         test(\u001b[32m'TC_SMOKE_010: 会话状态保持'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 136 |\u001b[39m             \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m apiClient\u001b[33m.\u001b[39mgetSession(testSession\u001b[33m.\u001b[39mtoken)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 137 |\u001b[39m             expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'success'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 138 |\u001b[39m             expect(response\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mtoken)\u001b[33m.\u001b[39mtoBe(testSession\u001b[33m.\u001b[39mtoken)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 139 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m'✅ 会话状态保持正常'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.token (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:136:69)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m● \u001b[22m\u001b[1m冒烟测试 - 核心功能验证 › 错误处理基础验证 › TC_SMOKE_012: 未授权访问被拒绝\u001b[39m\u001b[22m\n\n    TypeError: Cannot read properties of undefined (reading 'id')\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 149 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 150 |\u001b[39m         test(\u001b[32m'TC_SMOKE_012: 未授权访问被拒绝'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 151 |\u001b[39m             \u001b[36mawait\u001b[39m expect(apiClient\u001b[33m.\u001b[39mdeleteRoom(testRoom\u001b[33m.\u001b[39mid\u001b[33m,\u001b[39m \u001b[32m'invalid-token'\u001b[39m))\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 152 |\u001b[39m                 \u001b[33m.\u001b[39mrejects\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 153 |\u001b[39m             console\u001b[33m.\u001b[39mlog(\u001b[32m'✅ 访问控制正常'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 154 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.id (\u001b[22m\u001b[2m\u001b[0m\u001b[36msmoke.test.js\u001b[39m\u001b[0m\u001b[2m:151:56)\u001b[22m\u001b[2m\u001b[22m\n","testResults":[{"ancestorTitles":["冒烟测试 - 核心功能验证","API连接性测试"],"duration":1,"failureMessages":["TypeError: apiClient.healthCheck is not a function\n    at Object.healthCheck (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:27:46)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 API连接性测试 TC_SMOKE_001: API服务可访问","status":"failed","title":"TC_SMOKE_001: API服务可访问"},{"ancestorTitles":["冒烟测试 - 核心功能验证","API连接性测试"],"duration":0,"failureMessages":["TypeError: apiClient.healthCheck is not a function\n    at Object.healthCheck (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:34:29)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 API连接性测试 TC_SMOKE_002: API响应时间正常","status":"failed","title":"TC_SMOKE_002: API响应时间正常"},{"ancestorTitles":["冒烟测试 - 核心功能验证","房间管理核心功能"],"duration":57,"failureMessages":["AggregateError: Error\n    at AxiosError.Object.<anonymous>.AxiosError.from (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/adapters/http.js:817:25)\n    at RedirectableRequest.emit (node:events:520:35)\n    at ClientRequest.eventHandlers.<computed> (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:508:28)\n    at emitErrorEvent (node:_http_client:107:11)\n    at Socket.socketErrorListener (node:_http_client:574:5)\n    at Socket.emit (node:events:508:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at ApiClient.createRoom (/Users/hukai/Documents/trae_projects/xiaowo/tests/utils/apiClient.js:84:22)\n    at Object.<anonymous> (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:50:30)"],"fullName":"冒烟测试 - 核心功能验证 房间管理核心功能 TC_SMOKE_003: 能够创建公开房间","status":"failed","title":"TC_SMOKE_003: 能够创建公开房间"},{"ancestorTitles":["冒烟测试 - 核心功能验证","房间管理核心功能"],"duration":0,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:60:63)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 房间管理核心功能 TC_SMOKE_004: 能够获取房间信息","status":"failed","title":"TC_SMOKE_004: 能够获取房间信息"},{"ancestorTitles":["冒烟测试 - 核心功能验证","会话管理核心功能"],"duration":11,"failureMessages":["AggregateError: Error\n    at AxiosError.Object.<anonymous>.AxiosError.from (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/core/AxiosError.js:96:14)\n    at RedirectableRequest.handleRequestError (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/adapters/http.js:817:25)\n    at RedirectableRequest.emit (node:events:520:35)\n    at ClientRequest.eventHandlers.<computed> (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/follow-redirects/index.js:49:24)\n    at ClientRequest.emit (node:events:508:28)\n    at emitErrorEvent (node:_http_client:107:11)\n    at Socket.socketErrorListener (node:_http_client:574:5)\n    at Socket.emit (node:events:508:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at ApiClient.createSession (/Users/hukai/Documents/trae_projects/xiaowo/tests/utils/apiClient.js:47:22)\n    at Object.<anonymous> (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:74:30)"],"fullName":"冒烟测试 - 核心功能验证 会话管理核心功能 TC_SMOKE_005: 能够创建用户会话","status":"failed","title":"TC_SMOKE_005: 能够创建用户会话"},{"ancestorTitles":["冒烟测试 - 核心功能验证","会话管理核心功能"],"duration":0,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:84:35)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 会话管理核心功能 TC_SMOKE_006: 能够加入房间","status":"failed","title":"TC_SMOKE_006: 能够加入房间"},{"ancestorTitles":["冒烟测试 - 核心功能验证","WebSocket连接核心功能"],"duration":1,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:104:52)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 WebSocket连接核心功能 TC_SMOKE_007: WebSocket能够连接","status":"failed","title":"TC_SMOKE_007: WebSocket能够连接"},{"ancestorTitles":["冒烟测试 - 核心功能验证","WebSocket连接核心功能"],"duration":3,"failureMessages":["Error: \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mnot\u001b[2m.\u001b[22mtoThrow\u001b[2m()\u001b[22m\n\nError name:    \u001b[31m\"Error\"\u001b[39m\nError message: \u001b[31m\"WebSocket未连接\"\u001b[39m\n\n    \u001b[0m \u001b[90m 103 |\u001b[39m   send(type\u001b[33m,\u001b[39m data \u001b[33m=\u001b[39m {}) {\n     \u001b[90m 104 |\u001b[39m     \u001b[36mif\u001b[39m (\u001b[33m!\u001b[39m\u001b[36mthis\u001b[39m\u001b[33m.\u001b[39misConnected) {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 105 |\u001b[39m       \u001b[36mthrow\u001b[39m \u001b[36mnew\u001b[39m \u001b[33mError\u001b[39m(\u001b[32m'WebSocket未连接'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 106 |\u001b[39m     }\n     \u001b[90m 107 |\u001b[39m     \n     \u001b[90m 108 |\u001b[39m     \u001b[36mconst\u001b[39m message \u001b[33m=\u001b[39m \u001b[33mJSON\u001b[39m\u001b[33m.\u001b[39mstringify({ type\u001b[33m,\u001b[39m data })\u001b[33m;\u001b[39m\u001b[0m\n\n      \u001b[2mat WebSocketClient.send (\u001b[22mutils/websocketClient.js\u001b[2m:105:13)\u001b[22m\n      \u001b[2mat WebSocketClient.send [as sendPlay] (\u001b[22mutils/websocketClient.js\u001b[2m:115:10)\u001b[22m\n      \u001b[2mat sendPlay (\u001b[22msmoke.test.js\u001b[2m:112:35)\u001b[22m\n      \u001b[2mat Object.<anonymous> (\u001b[22mnode_modules/expect/build/toThrowMatchers.js\u001b[2m:74:11)\u001b[22m\n      \u001b[2mat Object.throwingMatcher [as toThrow] (\u001b[22mnode_modules/expect/build/index.js\u001b[2m:320:21)\u001b[22m\n      \u001b[2mat Object.toThrow (\u001b[22msmoke.test.js\u001b[2m:112:55)\u001b[22m\n    at Object.toThrow (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:112:55)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 WebSocket连接核心功能 TC_SMOKE_008: 能够发送播放控制消息","status":"failed","title":"TC_SMOKE_008: 能够发送播放控制消息"},{"ancestorTitles":["冒烟测试 - 核心功能验证","数据一致性验证"],"duration":1,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:125:70)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 数据一致性验证 TC_SMOKE_009: 房间成员数量正确","status":"failed","title":"TC_SMOKE_009: 房间成员数量正确"},{"ancestorTitles":["冒烟测试 - 核心功能验证","数据一致性验证"],"duration":0,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'token')\n    at Object.token (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:136:69)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 数据一致性验证 TC_SMOKE_010: 会话状态保持","status":"failed","title":"TC_SMOKE_010: 会话状态保持"},{"ancestorTitles":["冒烟测试 - 核心功能验证","错误处理基础验证"],"duration":3,"failureMessages":[],"fullName":"冒烟测试 - 核心功能验证 错误处理基础验证 TC_SMOKE_011: 无效房间ID返回正确错误","status":"passed","title":"TC_SMOKE_011: 无效房间ID返回正确错误"},{"ancestorTitles":["冒烟测试 - 核心功能验证","错误处理基础验证"],"duration":0,"failureMessages":["TypeError: Cannot read properties of undefined (reading 'id')\n    at Object.id (/Users/hukai/Documents/trae_projects/xiaowo/tests/smoke.test.js:151:56)\n    at Promise.then.completed (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:316:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-runner/build/runTest.js:444:34)"],"fullName":"冒烟测试 - 核心功能验证 错误处理基础验证 TC_SMOKE_012: 未授权访问被拒绝","status":"failed","title":"TC_SMOKE_012: 未授权访问被拒绝"}]}],"config":{"bail":0,"changedFilesWithAncestor":false,"ci":false,"collectCoverage":false,"collectCoverageFrom":["utils/**/*.js","!**/node_modules/**","!**/coverage/**","!**/dist/**"],"coverageDirectory":"/Users/hukai/Documents/trae_projects/xiaowo/tests/coverage","coverageProvider":"babel","coverageReporters":["text","lcov","html"],"detectLeaks":false,"detectOpenHandles":false,"errorOnDeprecated":false,"expand":false,"findRelatedTests":false,"forceExit":false,"json":false,"lastCommit":false,"listTests":false,"logHeapUsage":false,"maxConcurrency":5,"maxWorkers":7,"noStackTrace":false,"nonFlagArgs":[],"notify":false,"notifyMode":"failure-change","onlyChanged":false,"onlyFailures":false,"openHandlesTimeout":1000,"passWithNoTests":false,"projects":[],"reporters":[["default",{}],["/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/jest-html-reporters/index.js",{"publicPath":"./reports","filename":"test-report.html","expand":true}]],"rootDir":"/Users/hukai/Documents/trae_projects/xiaowo/tests","runTestsByPath":false,"seed":-928236872,"skipFilter":false,"snapshotFormat":{"escapeString":false,"printBasicPrototype":false},"testFailureExitCode":1,"testPathPattern":"smoke","testSequencer":"/Users/hukai/Documents/trae_projects/xiaowo/tests/node_modules/@jest/test-sequencer/build/index.js","testTimeout":30000,"updateSnapshot":"new","useStderr":false,"verbose":true,"watch":false,"watchAll":false,"watchman":true,"workerThreads":false},"endTime":1767109709851,"_reporterOptions":{"publicPath":"./reports","filename":"test-report.html","expand":true,"pageTitle":"","hideIcon":false,"testCommand":"","openReport":true,"failureMessageOnly":0,"enableMergeData":false,"dataMergeLevel":1,"inlineSource":false,"urlForTestFiles":"","darkTheme":false,"includeConsoleLog":false,"stripSkippedTest":false},"logInfoMapping":{},"attachInfos":{}})