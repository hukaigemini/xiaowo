<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°çª - æ¸©é¦¨å°å±‹ | æˆ¿é—´</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#FFFBF0', // Warm Cream
                        primary: '#FF9F76', // Soft Coral
                        'primary-hover': '#FF8C5A',
                        secondary: '#A3C9A8', // Sage Green
                        surface: '#F7EEDD', // Sand
                        text: {
                            main: '#4A3B32', // Deep Coffee
                            muted: '#8D7B68', // Mocha
                            light: '#FFFBF0' // Cream for dark backgrounds
                        },
                        dark: {
                            bg: '#2C241F', // Dark Coffee for Theater Mode
                            surface: '#3E3228', // Darker wood tone
                            control: 'rgba(62, 50, 40, 0.9)'
                        }
                    },
                    borderRadius: {
                        'xl': '12px',
                        '2xl': '16px',
                        '3xl': '24px',
                        '4xl': '32px'
                    },
                    boxShadow: {
                        'warm': '0 10px 40px -10px rgba(255, 159, 118, 0.3)',
                        'card': '0 20px 60px -15px rgba(74, 59, 50, 0.1)',
                        'wood': '0 4px 20px rgba(0, 0, 0, 0.2)'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Artplayer è‡ªå®šä¹‰æ ·å¼ - æ¸©æš–å±…å®¶é£ */
        .art-video-player .art-bottom {
            /* å¼ºåˆ¶å®šä½ */
            position: absolute !important;
            bottom: 24px !important;
            top: auto !important; /* å¿…é¡»é‡ç½® topï¼Œé˜²æ­¢æ‹‰ä¼¸ */
            height: auto !important;
            max-height: 120px !important; /* é™åˆ¶æœ€å¤§é«˜åº¦ */
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 90% !important;
            max-width: 640px !important; /* è¿›ä¸€æ­¥æ”¶çª„ */
            
            /* è§†è§‰é£æ ¼ */
            background: rgba(247, 238, 221, 0.85) !important;
            backdrop-filter: blur(12px) !important;
            -webkit-backdrop-filter: blur(12px) !important;
            border: 1px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 20px !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2) !important;
            
            /* å†…éƒ¨å¸ƒå±€ */
            padding: 10px 20px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: center !important;
            align-items: center !important;
            gap: 6px !important;
            
            pointer-events: auto !important;
            transition: all 0.3s ease !important;
            z-index: 50 !important;
        }

        /* æ‚¬æµ®æ—¶ç¨å¾®ä¸Šæµ® */
        .art-video-player .art-bottom:hover {
            transform: translateX(-50%) translateY(-2px) !important;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.3) !important;
        }

        /* è¿›åº¦æ¡å®¹å™¨ - æ•´åˆåœ¨èƒ¶å›Šå†…éƒ¨ */
        .art-video-player .art-progress {
            position: relative !important;
            width: 100% !important;
            height: 6px !important;
            bottom: auto !important;
            left: auto !important;
            border-radius: 3px !important;
            background: rgba(74, 59, 50, 0.1) !important; /* æ·±è‰²è½¨é“ï¼Œå¯¹æ¯”åº¦æ›´é«˜ */
            overflow: visible !important;
            margin: 0 !important;
            padding: 0 !important;
            order: 1 !important; /* ç¡®ä¿åœ¨ä¸Šæ–¹ */
        }

        /* è¿›åº¦æ¡æ’­æ”¾éƒ¨åˆ† */
        .art-video-player .art-control-progress-played {
            background: #FF9F76 !important; /* primary */
            border-radius: 3px !important;
        }

        /* è¿›åº¦æ¡ç¼“å†²éƒ¨åˆ† */
        .art-video-player .art-control-progress-loaded {
            background: rgba(255, 159, 118, 0.2) !important;
            border-radius: 3px !important;
        }

        /* é¼ æ ‡æ‚¬åœ/æ‹–æ‹½æ—¶çš„å¹»å½±è¿›åº¦æ¡ (ä¿®å¤é»‘è‰²æ¨ªçº¿é—®é¢˜) */
        .art-video-player .art-control-progress-hover {
            background: rgba(74, 59, 50, 0.08) !important; /* ææ·¡çš„æ·±è‰² */
            border-radius: 3px !important;
            height: 100% !important;
            border: none !important; /* ç¡®ä¿æ— è¾¹æ¡† */
            transform: scaleY(1) !important; /* é˜²æ­¢è¢«é»˜è®¤æ ·å¼å‹ç¼© */
        }
        
        /* å½»åº•éšè—ç¼©ç•¥å›¾å®¹å™¨ (é˜²æ­¢å‡ºç°é»‘çº¿) */
        .art-video-player .art-thumb {
            display: none !important;
            width: 0 !important;
            height: 0 !important;
            opacity: 0 !important;
            visibility: hidden !important;
            background: none !important;
            border: none !important;
            box-shadow: none !important;
            pointer-events: none !important;
        }

        /* éšè—é«˜äº®æ ‡è®° */
        .art-video-player .art-highlight {
            display: none !important;
        }

        /* æ‹–æ‹½çƒ */
        .art-video-player .art-control-progress-indicator {
            width: 14px !important;
            height: 14px !important;
            background: #fff !important;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
            border: 2px solid #FF9F76 !important; /* å¢åŠ è¾¹æ¡†ï¼Œæ›´æ¸…æ™° */
            border-radius: 50% !important;
            top: 50% !important;
            transform: translateY(-50%) !important;
            display: block !important;
        }

        /* æ§åˆ¶æ  (æŒ‰é’®åŒºåŸŸ) */
        .art-video-player .art-controls {
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            backdrop-filter: none !important;
            width: 100% !important;
            height: 36px !important;
            padding: 0 !important;
            margin: 0 !important;
            display: flex !important;
            align-items: center !important;
            order: 2 !important; /* ç¡®ä¿åœ¨ä¸‹æ–¹ */
        }

        /* å›¾æ ‡é¢œè‰² */
        .art-video-player .art-icon path {
            fill: #4A3B32 !important; /* text-main */
            transition: fill 0.2s !important;
        }
        
        .art-video-player .art-icon:hover path {
            fill: #FF9F76 !important; /* primary-hover */
        }

        .art-video-player .art-control-time {
            color: #4A3B32 !important;
            font-family: 'Inter', monospace !important;
            font-weight: 600 !important;
            font-size: 13px !important;
            margin: 0 10px !important;
        }
        
        /* éšè—é»˜è®¤çš„èƒŒæ™¯æ¸å˜ */
        .art-video-player .art-mask {
            background: none !important;
        }
        
        /* æ‚¬æµ®æç¤ºæ¡†æ ·å¼ (æ—¶é—´æ°”æ³¡) */
        .art-video-player .art-tip {
            background: rgba(62, 50, 40, 0.9) !important;
            border-radius: 8px !important;
            padding: 6px 10px !important;
            font-size: 12px !important;
            color: #fff !important;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2) !important;
            border: 1px solid rgba(255,255,255,0.1) !important;
            bottom: 20px !important; /* ç¨å¾®æŠ¬é«˜ï¼Œé¿å…é®æŒ¡è¿›åº¦æ¡ */
        }
        
        /* éšè—æç¤ºæ¡†çš„å°ç®­å¤´ */
        .art-video-player .art-tip::after {
            display: none !important;
        }

        /* Loading çŠ¶æ€ä¼˜åŒ– - æ‹’ç»æ­»é»‘ï¼Œä½¿ç”¨ç£¨ç ‚æš–å’–è‰² */
        .art-video-player .art-layer-loading {
            background: rgba(44, 36, 31, 0.4) !important; /* dark.bg with opacity */
            backdrop-filter: blur(20px) !important;
            -webkit-backdrop-filter: blur(20px) !important;
        }
        
        /* Loading å›¾æ ‡é¢œè‰² */
        .art-video-player .art-loading-indicator {
            color: #FF9F76 !important; /* primary */
        }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-hidden bg-dark-bg transition-colors duration-1000">
    
    <!-- æˆ¿é—´é¡µé¢ -->
    <div id="room-page" class="relative z-10 flex-1 flex flex-col h-screen" onclick="toggleControls()">
        
        <!-- Toast é€šçŸ¥ (é»˜è®¤éšè—) -->
        <div id="toast" class="absolute top-24 left-1/2 -translate-x-1/2 z-[60] pointer-events-none opacity-0 transition-opacity duration-300">
            <div class="bg-black/60 backdrop-blur-md text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg flex items-center space-x-2">
                <span class="w-2 h-2 bg-primary rounded-full animate-pulse"></span>
                <span id="toast-message">å¯¹æ–¹æš‚åœäº†è§†é¢‘</span>
            </div>
        </div>
        
        <!-- æ–°æ‰‹å¼•å¯¼é®ç½© (é¦–æ¬¡è¿›æˆ¿æ˜¾ç¤º) -->
        <div id="newbie-guide" class="fixed inset-0 bg-black/80 backdrop-blur-md z-[100] flex items-center justify-center p-6 opacity-0 transition-opacity duration-500 pointer-events-none">
            <div class="bg-surface rounded-3xl p-8 max-w-md text-center shadow-2xl">
                <div class="text-5xl mb-6">ğŸŒŸ</div>
                <h2 class="text-2xl font-bold text-text-main mb-4">æ¬¢è¿æ¥åˆ°å°çªï¼</h2>
                <p class="text-text-muted mb-6">è¿™æ˜¯ä¸€ä¸ªæ¸©é¦¨çš„åœ¨çº¿è§‚å½±å®¤ï¼Œè®©ä½ å’Œè¿œæ–¹çš„äº²å‹ä¸€èµ·çœ‹ç”µå½±ã€‚</p>
                <div class="space-y-4 mb-8 text-left">
                    <div class="flex items-start space-x-3">
                        <span class="text-primary mt-1">1.</span>
                        <p class="text-text-main">ç²˜è´´è§†é¢‘é“¾æ¥åˆ°è¾“å…¥æ¡†</p>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-primary mt-1">2.</span>
                        <p class="text-text-main">ç‚¹å‡»ã€Œç†„ç¯ï¼Œå¼€å§‹æ”¾æ˜ ã€</p>
                    </div>
                    <div class="flex items-start space-x-3">
                        <span class="text-primary mt-1">3.</span>
                        <p class="text-text-main">å¤åˆ¶é“¾æ¥é‚€è¯·äº²å‹åŠ å…¥</p>
                    </div>
                </div>
                <button id="guide-close" class="w-full py-3 bg-primary text-white font-bold rounded-2xl hover:bg-primary-hover transition-all duration-300 shadow-lg active:scale-95">
                    æˆ‘çŸ¥é“äº†ï¼Œå¼€å§‹ä½¿ç”¨
                </button>
            </div>
        </div>

        <!-- é¡¶éƒ¨æœ¨è´¨æ  -->
        <div id="top-bar" class="absolute top-0 left-0 right-0 p-6 flex justify-between items-center z-50 transition-all duration-500 transform translate-y-0 opacity-100">
            <!-- å·¦ä¾§ï¼šé€€å‡ºæŒ‰é’® -->
            <div class="flex-1 flex justify-start">
                <button id="top-exit-btn" onclick="exitRoom()" class="bg-surface backdrop-blur-md hover:bg-red-50 hover:text-red-500 transition-all duration-300 p-2.5 rounded-full shadow-wood border border-white/10 text-text-muted active:scale-95" title="é€€å‡ºæˆ¿é—´">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                </button>
            </div>

            <!-- ä¸­é—´ï¼šæˆ¿é—´ä¿¡æ¯ -->
            <div class="flex-none">
                <div id="top-room-info" class="bg-surface backdrop-blur-md hover:bg-surface/90 transition-all duration-300 px-5 py-3 rounded-full flex items-center space-x-4 shadow-wood border border-white/10">
                    <div class="flex items-center space-x-2">
                        <span id="status-dot" class="w-2.5 h-2.5 bg-secondary rounded-full pulse-animation shadow-[0_0_10px_rgba(163,201,168,0.6)]"></span>
                        <span id="status-text" class="text-xs text-text-main font-bold tracking-wider">æ”¾æ˜ ä¸­</span>
                    </div>
                    <div class="h-4 w-0.5 bg-text-muted/20"></div>
                    <span id="sync-status" class="text-xs text-text-muted font-medium">åŒæ­¥ç²¾åº¦ï¼šå®Œç¾</span>
                    <div class="h-4 w-0.5 bg-text-muted/20"></div>
                    <span class="text-sm text-text-main font-mono font-medium tracking-widest">æˆ¿é—´å· 888888</span>
                    
                    <!-- å¤åˆ¶é“¾æ¥æŒ‰é’® -->
                    <button id="share-btn" onclick="copyLink(event)" class="ml-2 p-1.5 hover:bg-black/5 rounded-full transition-colors text-text-muted hover:text-primary" title="å¤åˆ¶é‚€è¯·é“¾æ¥">
                        <!-- å›¾æ ‡ä¼šæ ¹æ®è®¾å¤‡åŠ¨æ€åˆ‡æ¢ï¼Œé»˜è®¤æ˜¾ç¤ºå¤åˆ¶å›¾æ ‡ -->
                        <svg id="icon-copy" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        <svg id="icon-share" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- å³ä¾§ï¼šæˆå‘˜åˆ—è¡¨ -->
            <div class="flex-1 flex justify-end">
                <div id="top-member-list" class="bg-surface backdrop-blur-md hover:bg-surface/90 transition-all duration-300 px-4 py-2 rounded-full flex items-center shadow-wood border border-white/10">
                    <div class="flex -space-x-3" id="member-avatars">
                        <!-- åŠ¨æ€ç”Ÿæˆçš„æˆå‘˜å¤´åƒå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                    </div>
                    <span class="ml-3 text-xs text-text-main font-medium opacity-80" id="member-count">3äººåœ¨çº¿</span>
                </div>
            </div>
        </div>

        <!-- æ’­æ”¾å™¨ä¸»ä½“ (å…¨å±æ²‰æµ¸) -->
        <div class="flex-1 flex items-center justify-center relative" onclick="event.stopPropagation(); toggleControls();">
            
            <!-- ç©ºçŠ¶æ€/é“¾æ¥è¾“å…¥ï¼šçªçªÂ·å¾…æ˜ å… (The Cozy Lobby) -->
            <div id="link-input-section" class="w-full max-w-2xl text-center space-y-10 fade-in px-6 relative z-20" onclick="event.stopPropagation()">
                
                <!-- æ°›å›´èƒŒæ™¯å…‰æ™• -->
                <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[120%] h-[120%] bg-primary/5 rounded-full blur-[100px] pointer-events-none animate-pulse"></div>

                <!-- ä¸»ä½“å®¹å™¨ï¼šç£¨ç ‚ç¥¨æ ¹ -->
                <div class="relative bg-surface/40 backdrop-blur-xl rounded-[40px] p-10 shadow-[0_8px_32px_rgba(0,0,0,0.1)] border border-white/20 overflow-hidden group hover:bg-surface/50 transition-all duration-500">
                    
                    <!-- é¡¶éƒ¨è£…é¥°çº¿ -->
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-primary/30 to-transparent opacity-50"></div>

                    <!-- åœºæ™¯æ’ç”» -->
                    <div class="flex justify-center mb-8 space-x-4">
                        <span class="text-5xl drop-shadow-lg transform -rotate-6 hover:rotate-0 transition-transform duration-300 cursor-default">ğŸ›‹ï¸</span>
                        <span class="text-5xl drop-shadow-lg transform translate-y-2 hover:translate-y-0 transition-transform duration-300 cursor-default">ğŸ¿</span>
                        <span class="text-5xl drop-shadow-lg transform rotate-6 hover:rotate-0 transition-transform duration-300 cursor-default">ğŸ•¯ï¸</span>
                    </div>

                    <!-- æ–‡æ¡ˆ -->
                    <div class="space-y-3 mb-10">
                        <h2 class="text-2xl text-text-main font-bold tracking-wide">çªçªå·²æ­å¥½ï¼Œç­‰ä¸€éƒ¨å¥½æˆã€‚</h2>
                    </div>
                    
                    <!-- è¾“å…¥ä½“éªŒï¼šèšå…‰ç¯æ§½ -->
                    <div class="relative group/input">
                        <div class="absolute -inset-1 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-2xl blur opacity-0 group-hover/input:opacity-100 transition duration-500"></div>
                        <div class="relative bg-surface rounded-2xl p-2 flex items-center shadow-inner-warm border border-white/10 transition-all duration-300 focus-within:ring-2 focus-within:ring-primary/30 focus-within:bg-white/80">
                            <div class="relative flex-1">
                                <input id="video-url-input" type="text" placeholder="æŠŠå½±ç‰‡é“¾æ¥è´´åœ¨è¿™é‡Œï¼Œå°±åƒæŠŠå…‰ç›˜æ”¾å…¥æ’­æ”¾æœº" 
                                       class="w-full bg-transparent border-none text-text-main placeholder-text-muted/50 px-4 py-3 focus:ring-0 focus:outline-none text-base font-medium">
                                <div id="url-status-indicator" class="absolute right-3 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-gray-300"></div>
                            </div>
                            <button id="start-play-btn" class="ml-3 px-6 py-3 bg-primary text-white rounded-xl hover:bg-primary-hover transition-all duration-300 font-bold text-sm shadow-lg active:scale-95 whitespace-nowrap flex items-center space-x-2">
                                <span>âœ¨ ç†„ç¯ï¼Œå¼€å§‹æ”¾æ˜ </span>
                            </button>
                        </div>
                    </div>
                    <!-- æ”¯æŒ MP4 / m3u8 é“¾æ¥ -->
                    <p class="text-xs text-text-muted/50 mt-2">æ”¯æŒ MP4 / m3u8 é“¾æ¥</p>
                    <!-- åº•éƒ¨è£…é¥°ï¼šå°ç«  -->
                    <div class="absolute -bottom-6 -right-6 w-24 h-24 bg-text-muted/5 rounded-full blur-xl"></div>
                </div>

                <!-- å¿«é€Ÿæµ‹è¯•æº (ä½è°ƒå¤„ç†) -->
                <div class="flex flex-col items-center space-y-4 opacity-60 hover:opacity-100 transition-opacity duration-300">
                    <div class="flex flex-wrap justify-center gap-3">
                        <button onclick="selectSource('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4', 'å¤§é—¹å¤©å®«')" 
                                class="px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-xs text-text-muted/80 hover:text-primary transition-all cursor-pointer backdrop-blur-sm">
                            ğŸ¬ å¤§é—¹å¤©å®«
                        </button>
                        <button onclick="selectSource('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4', 'å¥‡å¹»æ—…ç¨‹')" 
                                class="px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-xs text-text-muted/80 hover:text-primary transition-all cursor-pointer backdrop-blur-sm">
                            ğŸ¬ å¥‡å¹»æ—…ç¨‹
                        </button>
                        <button onclick="selectSource('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4', 'é€Ÿåº¦æ¿€æƒ…')" 
                                class="px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-xs text-text-muted/80 hover:text-primary transition-all cursor-pointer backdrop-blur-sm">
                            ğŸ¬ é€Ÿåº¦æ¿€æƒ…
                        </button>
                        <button onclick="selectSource('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4', 'å†’é™©ä¹‹æ—…')" 
                                class="px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-xs text-text-muted/80 hover:text-primary transition-all cursor-pointer backdrop-blur-sm">
                            ğŸ¬ å†’é™©ä¹‹æ—…
                        </button>
                        <button onclick="selectSource('https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/Sintel.mp4', 'æœ€åçš„ç‰‡æ®µ')" 
                                class="px-3 py-1.5 bg-white/10 hover:bg-white/20 border border-white/10 rounded-full text-xs text-text-muted/80 hover:text-primary transition-all cursor-pointer backdrop-blur-sm">
                            ğŸ¬ æœ€åçš„ç‰‡æ®µ
                        </button>
                    </div>
                </div>
            </div>

            <!-- è§†é¢‘å®¹å™¨ -->
            <div id="player-section" class="absolute inset-0 hidden bg-black z-0">
                <!-- Artplayer æŒ‚è½½ç‚¹ -->
                <div id="artplayer-container" class="w-full h-full"></div>
            </div>
        </div>

        <!-- åº•éƒ¨æ§åˆ¶æ  (å·²åºŸå¼ƒï¼Œä½¿ç”¨ Artplayer è‡ªå¸¦æ§åˆ¶æ ) -->
        <div id="bottom-bar" class="hidden"></div>

        <!-- é€€å‡ºæŒ‰é’® (å·²æ•´åˆåˆ°é¡¶éƒ¨æ ï¼Œç§»é™¤æ—§çš„ç»å¯¹å®šä½æŒ‰é’®) -->
        
        <!-- Autoplay å¼•å¯¼è¦†ç›–å±‚ (é»˜è®¤éšè—) -->
        <div id="autoplay-overlay" class="absolute inset-0 z-[70] bg-black/60 backdrop-blur-sm flex flex-col items-center justify-center hidden cursor-pointer" onclick="handleAutoplayClick()">
            <div class="bg-surface/20 p-6 rounded-full mb-4 animate-pulse">
                <svg class="w-12 h-12 text-primary" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z" />
                </svg>
            </div>
            <p class="text-white text-lg font-medium tracking-wide">ç‚¹å‡»å±å¹•ï¼ŒåŠ å…¥æ”¾æ˜ </p>
        </div>
    </div>

    <script>
        const startPlayBtn = document.getElementById('start-play-btn');
        const linkInputSection = document.getElementById('link-input-section');
        const playerSection = document.getElementById('player-section');
        const topBar = document.getElementById('top-bar');
        const toast = document.getElementById('toast');
        const memberAvatars = document.getElementById('member-avatars');
        const memberCount = document.getElementById('member-count');
        
        let controlsVisible = true;
        let isPlaying = false; // æ ‡è®°æ˜¯å¦å¼€å§‹æ’­æ”¾
        let controlsTimeout;
        let art = null; // Artplayer å®ä¾‹
        
        // éšæœºå¤´åƒç”Ÿæˆå™¨
        const randomAvatars = ['ğŸ±', 'ğŸ¶', 'ğŸ°', 'ğŸ¦Š', 'ğŸ»', 'ğŸ¼', 'ğŸ¨', 'ğŸ¯', 'ğŸ¦', 'ğŸ®', 'ğŸ·', 'ğŸ¸', 'ğŸµ', 'ğŸ”', 'ğŸ§', 'ğŸ¦', 'ğŸ¤', 'ğŸº', 'ğŸ—', 'ğŸ´'];
        
        // ç½‘ç»œçŠ¶æ€é¢œè‰²
        const networkStatusColors = {
            good: '#A3C9A8', // ç»¿ç¯
            medium: '#FFD93D', // é»„ç¯
            poor: '#FF6B6B', // çº¢ç¯
            offline: '#8D7B68' // é»‘ç¯
        };
        
        // ç”Ÿæˆéšæœºç½‘ç»œçŠ¶æ€
        function getRandomNetworkStatus() {
            const statuses = ['good', 'medium', 'poor', 'offline'];
            return statuses[Math.floor(Math.random() * statuses.length)];
        }
        
        // ç”Ÿæˆéšæœºæˆå‘˜åˆ—è¡¨
        function generateRandomMembers() {
            // éšæœºç”Ÿæˆ2-7ä¸ªæˆå‘˜
            const memberCount = Math.floor(Math.random() * 6) + 2;
            const members = [];
            
            // ç¡®ä¿æœ‰æˆ¿ä¸»å’Œè‡ªå·±
            members.push({ id: 'owner', name: 'æˆ¿ä¸»', isOwner: true, isMe: false, avatar: 'ğŸ‘‘', status: 'good' });
            members.push({ id: 'me', name: 'æˆ‘', isOwner: false, isMe: true, avatar: randomAvatars[Math.floor(Math.random() * randomAvatars.length)], status: 'good' });
            
            // ç”Ÿæˆå…¶ä»–æˆå‘˜
            for (let i = 2; i < memberCount; i++) {
                members.push({
                    id: `member-${i}`,
                    name: `è®¿å®¢${i}`,
                    isOwner: false,
                    isMe: false,
                    avatar: randomAvatars[Math.floor(Math.random() * randomAvatars.length)],
                    status: getRandomNetworkStatus()
                });
            }
            
            return members;
        }
        
        // æ¸²æŸ“æˆå‘˜åˆ—è¡¨
        function renderMembers() {
            const members = generateRandomMembers();
            
            // æ¸…ç©ºç°æœ‰æˆå‘˜
            memberAvatars.innerHTML = '';
            
            // æ¸²æŸ“æ¯ä¸ªæˆå‘˜
            members.forEach((member, index) => {
                const memberElement = document.createElement('div');
                
                // è®¾ç½®æ ·å¼
                memberElement.className = `w-8 h-8 rounded-full border-2 border-surface flex items-center justify-center text-xs shadow-sm relative group cursor-help z-${members.length - index}`;
                
                // è®¾ç½®èƒŒæ™¯è‰²å’Œæ–‡æœ¬
                if (member.isOwner) {
                    memberElement.className += ' bg-primary text-white';
                } else if (member.isMe) {
                    memberElement.className += ' bg-secondary text-white font-bold';
                } else {
                    memberElement.className += ' bg-surface text-text-main font-medium';
                }
                
                // æ·»åŠ å¤´åƒ
                memberElement.textContent = member.avatar;
                
                // æ·»åŠ ç½‘ç»œçŠ¶æ€æŒ‡ç¤ºç¯
                const statusIndicator = document.createElement('div');
                statusIndicator.className = 'absolute -top-1 -right-1 w-3 h-3 rounded-full border-2 border-surface shadow-sm';
                statusIndicator.style.backgroundColor = networkStatusColors[member.status];
                
                // æ ¹æ®çŠ¶æ€æ·»åŠ åŠ¨ç”»
                if (member.status === 'good') {
                    statusIndicator.className += ' pulse-animation';
                }
                
                memberElement.appendChild(statusIndicator);
                
                // æ·»åŠ tooltip
                const tooltip = document.createElement('div');
                tooltip.className = 'absolute -bottom-8 left-1/2 -translate-x-1/2 bg-black/70 text-white text-[10px] px-2 py-0.5 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none';
                tooltip.textContent = member.name;
                memberElement.appendChild(tooltip);
                
                // æ·»åŠ åˆ°å®¹å™¨
                memberAvatars.appendChild(memberElement);
            });
            
            // æ›´æ–°æˆå‘˜æ•°é‡
            memberCount.textContent = `${members.length}äººåœ¨çº¿`;
        }
        
        // åˆå§‹åŒ–æˆå‘˜åˆ—è¡¨
        renderMembers();
        
        // å®šæœŸæ›´æ–°ç½‘ç»œçŠ¶æ€
        setInterval(() => {
            renderMembers();
        }, 10000); // æ¯10ç§’æ›´æ–°ä¸€æ¬¡
        
        // URLæ ¼å¼æ ¡éªŒ
        const urlInput = document.getElementById('video-url-input');
        const urlStatusIndicator = document.getElementById('url-status-indicator');
        
        // æ”¯æŒçš„è§†é¢‘æ ¼å¼
        const supportedFormats = ['.mp4', '.m3u8', '.webm', '.ogg', '.mov', '.avi'];
        
        // æ ¡éªŒURLæ ¼å¼
        function validateUrl(url) {
            if (!url.trim()) {
                return 'empty';
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æœ‰æ•ˆçš„URLæ ¼å¼
            try {
                new URL(url);
            } catch (error) {
                return 'invalid';
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æ”¯æŒçš„è§†é¢‘æ ¼å¼
            const lowerUrl = url.toLowerCase();
            for (const format of supportedFormats) {
                if (lowerUrl.includes(format)) {
                    return 'valid';
                }
            }
            
            return 'invalid';
        }
        
        // æ›´æ–°URLçŠ¶æ€æŒ‡ç¤ºå™¨
        function updateUrlStatus(url) {
            const status = validateUrl(url);
            
            switch (status) {
                case 'valid':
                    urlStatusIndicator.className = 'absolute right-3 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-secondary pulse-animation';
                    break;
                case 'invalid':
                    urlStatusIndicator.className = 'absolute right-3 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-red-500';
                    break;
                case 'empty':
                    urlStatusIndicator.className = 'absolute right-3 top-1/2 -translate-y-1/2 w-2.5 h-2.5 rounded-full bg-gray-300';
                    break;
            }
        }
        
        // æ·»åŠ è¾“å…¥äº‹ä»¶ç›‘å¬å™¨
        urlInput.addEventListener('input', function() {
            updateUrlStatus(this.value);
        });
        
        // æ·»åŠ å¤±ç„¦äº‹ä»¶ç›‘å¬å™¨ï¼ˆæ›´ä¸¥æ ¼çš„æ ¡éªŒï¼‰
        urlInput.addEventListener('blur', function() {
            updateUrlStatus(this.value);
            
            // å¦‚æœURLæ— æ•ˆä¸”éç©ºï¼Œæ˜¾ç¤ºæç¤º
            if (validateUrl(this.value) === 'invalid') {
                showToast(ERROR_TYPES.URL_INVALID, 'error');
            }
        });
        
        // åˆå§‹åŒ–åŒæ­¥çŠ¶æ€
        const syncStatus = document.getElementById('sync-status');
        
        // åŒæ­¥ç²¾åº¦çº§åˆ«
        const SYNC_LEVELS = {
            perfect: { text: 'åŒæ­¥ç²¾åº¦ï¼šå®Œç¾', color: '#A3C9A8' }, // ç»¿ç¯
            gentle: { text: 'åŒæ­¥ç²¾åº¦ï¼šå¾®è°ƒ', color: '#FFD93D' }, // é»„ç¯
            ghost: { text: 'åŒæ­¥ç²¾åº¦ï¼šè¿½èµ¶', color: '#FF9F76' }, // æ©™ç¯
            forced: { text: 'åŒæ­¥ç²¾åº¦ï¼šå¯¹é½', color: '#FF6B6B' } // çº¢ç¯
        };
        
        // æ›´æ–°åŒæ­¥çŠ¶æ€
        function updateSyncStatus(level = 'perfect') {
            const syncData = SYNC_LEVELS[level] || SYNC_LEVELS.perfect;
            syncStatus.textContent = syncData.text;
            syncStatus.style.color = syncData.color;
        }
        
        // æ¨¡æ‹ŸåŒæ­¥çŠ¶æ€å˜åŒ–
        function simulateSyncStatus() {
            const levels = Object.keys(SYNC_LEVELS);
            const randomLevel = levels[Math.floor(Math.random() * levels.length)];
            updateSyncStatus(randomLevel);
        }
        
        // åˆå§‹çŠ¶æ€æ›´æ–°
        updateUrlStatus(urlInput.value);
        updateSyncStatus();
        
        // æ¯5ç§’æ¨¡æ‹Ÿä¸€æ¬¡åŒæ­¥çŠ¶æ€å˜åŒ–
        setInterval(simulateSyncStatus, 5000);

        function exitRoom() {
            window.location.href = 'index.html';
        }

        startPlayBtn.addEventListener('click', () => {
            const url = document.getElementById('video-url-input').value.trim();
            if (!url) {
                showToast(ERROR_TYPES.URL_EMPTY, 'warning');
                return;
            }

            linkInputSection.classList.add('hidden');
            playerSection.classList.remove('hidden');
            
            // åˆå§‹åŒ– Artplayer
            initArtplayer(url);

            // å¼€å§‹æ’­æ”¾åï¼Œæ˜¾ç¤ºæ§åˆ¶æ 
            isPlaying = true;
            controlsVisible = true;
            updateControlsVisibility();
            resetControlsTimeout();
            
            // åˆ‡æ¢é¡¶éƒ¨æ ä¸ºåŠé€æ˜
            document.getElementById('top-exit-btn').classList.replace('bg-surface', 'bg-surface/60');
            document.getElementById('top-room-info').classList.replace('bg-surface', 'bg-surface/60');
            document.getElementById('top-member-list').classList.replace('bg-surface', 'bg-surface/60');

            // æ¨¡æ‹Ÿæ˜¾ç¤º Toast
            showToast('å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹æ”¾æ˜ ', 'success');
        });

        function initArtplayer(url) {
            if (art) {
                art.destroy();
            }

            art = new Artplayer({
                container: '#artplayer-container',
                url: url,
                theme: '#FF9F76', // primary color
                volume: 0.5,
                isLive: false,
                muted: false,
                autoplay: true,
                pip: true,
                autoSize: true,
                autoMini: true,
                screenshot: true,
                setting: true,
                loop: true,
                flip: true,
                playbackRate: true,
                aspectRatio: true,
                fullscreen: true,
                fullscreenWeb: true,
                subtitleOffset: true,
                miniProgressBar: false,
                mutex: true,
                backdrop: true,
                playsInline: true,
                autoPlayback: true,
                airplay: true,
                // HLS æ”¯æŒ
                customType: {
                    m3u8: function (video, url) {
                        if (Hls.isSupported()) {
                            const hls = new Hls();
                            hls.loadSource(url);
                            hls.attachMedia(video);
                        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                            video.src = url;
                        } else {
                            art.notice.show = 'ä¸æ”¯æŒæ’­æ”¾æ­¤è§†é¢‘æ ¼å¼';
                        }
                    },
                },
                // è‡ªå®šä¹‰å›¾æ ‡
                icons: {
                    state: '<svg width="48" height="48" viewBox="0 0 48 48" fill="none"><path d="M16 12v24l20-12-20-12z" fill="#ffffff"/></svg>',
                },
            });

            // ç›‘å¬æ’­æ”¾å™¨äº‹ä»¶
            art.on('play', () => {
                showToast('å¼€å§‹æ’­æ”¾', 'success');
            });
            
            art.on('pause', () => {
                showToast('æš‚åœæ’­æ”¾', 'info');
            });
            
            // ç¼“å†²ä¿æŠ¤æç¤º
            art.on('waiting', () => {
                showToast('è§†é¢‘ç¼“å†²ä¸­ï¼Œå…¶ä»–æˆå‘˜å·²æš‚åœç­‰å¾…', 'warning');
            });
            
            art.on('playing', () => {
                showToast('ç¼“å†²å®Œæˆï¼Œç»§ç»­æ’­æ”¾', 'success');
            });

            // é¼ æ ‡ç§»åŠ¨æ§åˆ¶é¡¶éƒ¨æ æ˜¾ç¤º
            art.on('hover', (state) => {
                controlsVisible = state;
                updateControlsVisibility();
            });
        }

        // åˆ‡æ¢æ§åˆ¶æ æ˜¾ç¤º/éšè— (ä¸»è¦ç”¨äºé¡¶éƒ¨æ )
        function toggleControls() {
            if (!isPlaying) return; 
            // Artplayer è‡ªå¸¦æ§åˆ¶æ æ˜¾éšé€»è¾‘ï¼Œè¿™é‡Œä¸»è¦å¤„ç†é¡¶éƒ¨æ 
            // å®é™…ä¸Š Artplayer çš„ hover äº‹ä»¶å·²ç»è¶³å¤Ÿå¤„ç†å¤§éƒ¨åˆ†æƒ…å†µ
        }

        function updateControlsVisibility() {
            if (!isPlaying) {
                topBar.style.opacity = '1';
                topBar.style.pointerEvents = 'auto';
                topBar.style.transform = 'translateY(0)';
                return;
            }

            const opacity = controlsVisible ? '1' : '0';
            const pointerEvents = controlsVisible ? 'auto' : 'none';
            
            topBar.style.opacity = opacity;
            topBar.style.pointerEvents = pointerEvents;
            topBar.style.transform = controlsVisible ? 'translateY(0)' : 'translateY(-20px)';
        }

        // è‡ªåŠ¨éšè—é€»è¾‘ (ä¸»è¦ç”¨äºé¡¶éƒ¨æ )
        function resetControlsTimeout() {
            if (!isPlaying) return;

            clearTimeout(controlsTimeout);
            controlsTimeout = setTimeout(() => {
                controlsVisible = false;
                updateControlsVisibility();
            }, 3000); 
        }

        // å¤åˆ¶é“¾æ¥åŠŸèƒ½ (æ”¯æŒç§»åŠ¨ç«¯åŸç”Ÿåˆ†äº«)
        async function copyLink(event) {
            event.stopPropagation();
            
            // è·å–æˆ¿é—´å·ï¼ˆå½“å‰æ˜¯å›ºå®šçš„ï¼Œå®é™…åº”ä»URLæˆ–åç«¯è·å–ï¼‰
            const roomId = '888888';
            const baseUrl = window.location.origin;
            const shareUrl = `${baseUrl}/room.html?roomId=${roomId}`;
            
            const shareData = {
                title: 'å°çª',
                text: 'æˆ‘åœ¨[å°çª]å»ºäº†ä¸ªæ¸©é¦¨å°çªï¼Œå¿«æ¥ä¸€èµ·çœ‹ç”µå½±å§ï¼',
                url: shareUrl
            };

            // ä¼˜å…ˆå°è¯•åŸç”Ÿåˆ†äº« (ç§»åŠ¨ç«¯)
            if (navigator.share && /Mobi|Android/i.test(navigator.userAgent)) {
                try {
                    await navigator.share(shareData);
                    return; // åˆ†äº«æˆåŠŸåæ— éœ€ Toastï¼Œç³»ç»Ÿä¼šæœ‰åé¦ˆ
                } catch (err) {
                    console.log('Share failed:', err);
                    // é™çº§åˆ°å¤åˆ¶é“¾æ¥
                }
            }

            // é™çº§æ–¹æ¡ˆï¼šå¤åˆ¶åˆ°å‰ªè´´æ¿
            try {
                await navigator.clipboard.writeText(`${shareData.text} æˆ¿é—´å·ï¼š${roomId}ï¼Œç‚¹å‡»åŠ å…¥ï¼š${shareData.url}`);
                showToast('âœ¨ é‚€è¯·å‡½å·²å¤åˆ¶ï¼Œå¿«å»å‘ç»™ Ta å§ï¼', 'success');
            } catch (err) {
                showToast(ERROR_TYPES.COPY_FAILED, 'error');
            }
        }

        // å¤„ç† Autoplay å¼•å¯¼ç‚¹å‡»
        function handleAutoplayClick() {
            const overlay = document.getElementById('autoplay-overlay');
            overlay.classList.add('hidden');
            if (art) {
                art.play();
            }
        }

        // æ›´æ–°è¿æ¥çŠ¶æ€ (ç¤ºä¾‹)
        function updateConnectionStatus(status) {
            const dot = document.getElementById('status-dot');
            const text = document.getElementById('status-text');
            
            // é‡ç½®ç±»å
            dot.className = 'w-2.5 h-2.5 rounded-full pulse-animation shadow-[0_0_10px_rgba(255,255,255,0.3)]';
            
            if (status === 'connected') {
                dot.classList.add('bg-secondary'); // Green
                dot.style.boxShadow = '0 0 10px rgba(163,201,168,0.6)';
                text.textContent = 'æ”¾æ˜ ä¸­';
            } else if (status === 'reconnecting') {
                dot.classList.add('bg-yellow-400'); // Yellow
                dot.style.boxShadow = '0 0 10px rgba(250, 204, 21, 0.6)';
                text.textContent = 'é‡è¿ä¸­';
            } else {
                dot.classList.add('bg-red-500'); // Red
                dot.classList.remove('pulse-animation'); // Stop pulsing on error
                dot.style.boxShadow = '0 0 10px rgba(239, 68, 68, 0.6)';
                text.textContent = 'å·²æ–­å¼€';
            }
        }

        // åˆå§‹åŒ–å›¾æ ‡æ˜¾ç¤º (ç§»åŠ¨ç«¯æ˜¾ç¤ºåˆ†äº«å›¾æ ‡)
        function initShareIcon() {
            if (navigator.share && /Mobi|Android/i.test(navigator.userAgent)) {
                document.getElementById('icon-copy').classList.add('hidden');
                document.getElementById('icon-share').classList.remove('hidden');
            }
        }

        // é€‰æ‹©æµ‹è¯•æº
        function selectSource(url, name) {
            const input = document.getElementById('video-url-input');
            input.value = url;
            input.focus();
            // æ›´æ–°URLçŠ¶æ€
            updateUrlStatus(url);
            showToast(`å·²å¡«å…¥ï¼š${name}`, 'success');
        }

        // Toast æ˜¾ç¤ºé€»è¾‘
        // é”™è¯¯ç±»å‹æšä¸¾
        const ERROR_TYPES = {
            URL_EMPTY: 'è¯·å…ˆè¾“å…¥è§†é¢‘é“¾æ¥',
            URL_INVALID: 'è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥ï¼Œæ”¯æŒ MP4 / m3u8 ç­‰æ ¼å¼',
            ROOM_FULL: 'æˆ¿é—´å·²æ»¡ï¼Œè¯·ç¨åå†è¯•æˆ–åˆ›å»ºæ–°æˆ¿é—´',
            ROOM_EXPIRED: 'æˆ¿é—´å·²è¿‡æœŸï¼Œè¯·åˆ›å»ºæ–°æˆ¿é—´',
            NETWORK_ERROR: 'ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•',
            PLAY_ERROR: 'è§†é¢‘æ’­æ”¾å¤±è´¥ï¼Œè¯·æ›´æ¢é“¾æ¥',
            COPY_FAILED: 'å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥',
            SHARE_FAILED: 'åˆ†äº«å¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨åˆ†äº«',
            UNKNOWN_ERROR: 'æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'
        };
        
        function showToast(message, type = 'info') {
            const toastEl = document.getElementById('toast');
            const msgEl = document.getElementById('toast-message');
            const statusDot = toastEl.querySelector('span:first-child');
            
            msgEl.textContent = message;
            
            // æ ¹æ®ç±»å‹è®¾ç½®ä¸åŒçš„æ ·å¼
            switch (type) {
                case 'error':
                    statusDot.className = 'w-2 h-2 bg-red-500 rounded-full animate-pulse';
                    toastEl.querySelector('div').className = 'bg-red-900/80 backdrop-blur-md text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg flex items-center space-x-2';
                    break;
                case 'success':
                    statusDot.className = 'w-2 h-2 bg-secondary rounded-full animate-pulse';
                    toastEl.querySelector('div').className = 'bg-green-900/80 backdrop-blur-md text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg flex items-center space-x-2';
                    break;
                case 'warning':
                    statusDot.className = 'w-2 h-2 bg-yellow-500 rounded-full animate-pulse';
                    toastEl.querySelector('div').className = 'bg-yellow-900/80 backdrop-blur-md text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg flex items-center space-x-2';
                    break;
                default:
                    statusDot.className = 'w-2 h-2 bg-primary rounded-full animate-pulse';
                    toastEl.querySelector('div').className = 'bg-black/60 backdrop-blur-md text-white px-6 py-2 rounded-full text-sm font-medium shadow-lg flex items-center space-x-2';
            }
            
            // æ˜¾ç¤ºToast
            toastEl.classList.remove('opacity-0');
            toastEl.classList.add('opacity-100');
            
            // 3ç§’åéšè—
            setTimeout(() => {
                toastEl.classList.remove('opacity-100');
                toastEl.classList.add('opacity-0');
            }, 3000);
        }

        // æ–°æ‰‹å¼•å¯¼é®ç½©é€»è¾‘
        function initNewbieGuide() {
            const guide = document.getElementById('newbie-guide');
            const closeBtn = document.getElementById('guide-close');
            
            // æ£€æŸ¥æ˜¯å¦é¦–æ¬¡è¿›æˆ¿
            const hasVisited = localStorage.getItem('xiaowo_visited');
            if (!hasVisited) {
                // æ˜¾ç¤ºå¼•å¯¼é®ç½©
                setTimeout(() => {
                    guide.classList.remove('opacity-0', 'pointer-events-none');
                }, 1000);
                
                // æ ‡è®°ä¸ºå·²è®¿é—®
                localStorage.setItem('xiaowo_visited', 'true');
            }
            
            // ç‚¹å‡»å…³é—­æŒ‰é’®
            closeBtn.addEventListener('click', () => {
                guide.classList.add('opacity-0', 'pointer-events-none');
            });
        }
        
        // åˆå§‹åŒ–
        resetControlsTimeout();
        initShareIcon();
        initNewbieGuide();
        
        // ç›‘å¬å±å¹•æ–¹å‘å˜åŒ–
        function handleOrientationChange() {
            const isLandscape = window.matchMedia('(orientation: landscape)').matches;
            const isMobile = /Mobi|Android/i.test(navigator.userAgent);
            
            if (isMobile && isLandscape) {
                // æ¨ªå±æ¨¡å¼ï¼šå…¨å±æ²‰æµ¸ï¼Œéšè—éå¿…è¦UI
                document.body.classList.add('bg-black');
                document.getElementById('top-bar').classList.add('hidden');
                
                // å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œè¿›å…¥å…¨å±
                if (isPlaying && art) {
                    art.fullscreen = true;
                }
            } else {
                // ç«–å±æ¨¡å¼ï¼šæ¢å¤æ­£å¸¸å¸ƒå±€
                document.body.classList.remove('bg-black');
                document.getElementById('top-bar').classList.remove('hidden');
            }
        }
        
        // æ·»åŠ å±å¹•æ–¹å‘å˜åŒ–äº‹ä»¶ç›‘å¬
        window.addEventListener('orientationchange', handleOrientationChange);
        window.addEventListener('resize', handleOrientationChange);
        
        // åˆå§‹åŒ–æ—¶æ£€æŸ¥ä¸€æ¬¡
        handleOrientationChange();

        // ç›‘å¬é¼ æ ‡ç§»åŠ¨ (å…¨å±€)
        document.addEventListener('mousemove', () => {
            if (isPlaying) {
                controlsVisible = true;
                updateControlsVisibility();
                resetControlsTimeout();
            }
        });

    </script>
</body>
</html>
