# 小窝同步观影平台 - 环境变量配置模板
# ===========================================
# 容器化配置 - 服务端口
# ===========================================
# 后端服务端口
BACKEND_PORT=8080

# 前端服务端口
FRONTEND_PORT=3000

# Redis服务端口
REDIS_PORT=6379

# Nginx HTTP端口
NGINX_HTTP_PORT=80

# Nginx HTTPS端口
NGINX_HTTPS_PORT=443

# ===========================================
# 应用配置
# ===========================================
# 开发/生产环境标识
ENVIRONMENT=development

# 是否启用调试模式
DEBUG=true

# 应用版本
APP_VERSION=1.0.0

# ===========================================
# 后端服务配置
# ===========================================
# 数据库文件路径
DB_PATH=/app/data/xiaowo.db

# 日志级别 (debug, info, warn, error)
LOG_LEVEL=info

# JWT密钥（生产环境请使用强随机密钥）
JWT_SECRET=dev-secret-key-change-in-production

# CORS允许的源域名
CORS_ALLOWED_ORIGINS=http://localhost:3000

# ===========================================
# WebSocket配置
# ===========================================
# WebSocket连接配置
WS_MAX_CONNECTIONS=100
WS_MAX_CONNECTIONS_PER_IP=10
WS_HEARTBEAT_INTERVAL=30s
WS_CLEANUP_INTERVAL=60s
WS_CONNECTION_TIMEOUT=300s

# ===========================================
# 房间管理配置
# ===========================================
# 房间最大成员数
ROOM_MAX_MEMBERS=7

# 房间自动清理时间（无人房间）
ROOM_CLEANUP_INTERVAL=10m

# 房间创建限制
ROOM_MAX_ROOMS_PER_USER=3

# ===========================================
# 速率限制配置
# ===========================================
# 全局限流
GLOBAL_RATE_LIMIT=1000/m

# IP限流
IP_RATE_LIMIT=100/m

# 用户限流
USER_RATE_LIMIT=50/m

# API限流
API_RATE_LIMIT=200/m

# ===========================================
# Redis缓存配置
# ===========================================
# Redis主机名（在Docker网络中）
REDIS_HOST=redis

# Redis端口
REDIS_PORT=6379

# Redis密码（可选）
REDIS_PASSWORD=

# Redis数据库编号
REDIS_DB=0

# Redis内存限制
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# ===========================================
# 前端应用配置
# ===========================================
# 前端API基础URL
VITE_API_BASE_URL=http://localhost:8080

# WebSocket连接URL
VITE_WS_URL=ws://localhost:8080

# 应用标题
VITE_APP_TITLE=小窝同步观影

# 应用版本
VITE_APP_VERSION=1.0.0

# ===========================================
# 监控和健康检查
# ===========================================
# 是否启用性能监控
ENABLE_METRICS=true

# 监控端口
METRICS_PORT=9090

# 健康检查端点
HEALTH_CHECK_ENDPOINT=/health

# ===========================================
# 数据库配置
# ===========================================
# SQLite数据库连接池配置
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=5m
DB_CONN_MAX_IDLE_TIME=2m

# ===========================================
# 文件上传配置
# ===========================================
# 最大文件大小（字节）
MAX_FILE_SIZE=10485760  # 10MB

# 允许的文件类型
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,mp4,m3u8

# 文件上传目录
UPLOAD_DIR=./uploads

# ===========================================
# 安全配置
# ===========================================
# JWT过期时间
JWT_EXPIRATION=24h

# API密钥长度
API_KEY_LENGTH=32

# ===========================================
# 开发环境特定配置
# ===========================================
# 是否启用热重载
HOT_RELOAD=true

# 开发模式下的额外日志
DEV_EXTRA_LOGGING=true

# ===========================================
# 生产环境配置（部署时配置）
# ===========================================
# 是否启用HTTPS
ENABLE_HTTPS=false

# SSL证书路径
SSL_CERT_PATH=
SSL_KEY_PATH=

# 域名配置
DOMAIN=
SUB_DOMAIN=

# ===========================================
# 通知和第三方服务配置
# ===========================================
# 是否启用系统通知
ENABLE_NOTIFICATIONS=true

# 通知发送方式
NOTIFICATION_METHODS=websocket

# 邮件服务配置（如果需要发送邮件）
SMTP_HOST=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=

# CDN配置（如果使用CDN）
CDN_BASE_URL=
CDN_API_KEY=

# ===========================================
# 国际化配置
# ===========================================
# 默认语言
DEFAULT_LOCALE=zh-CN

# 支持的语言列表
SUPPORTED_LOCALES=zh-CN,en-US

# ===========================================
# 缓存配置
# ===========================================
# 内存缓存配置
ENABLE_MEMORY_CACHE=true
CACHE_TTL=300s

# ===========================================
# 快速启动说明
# ===========================================
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 启动服务: docker-compose up -d
# 3. 访问应用: http://localhost:3000
# 4. 查看状态: docker-compose ps